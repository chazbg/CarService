@model CarService.ViewModels.RepairCardIndexData

@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<style>
    .selectedrow 
    { 
        background-color: #EEEEEE; 
    }
</style>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table>
    <tr>
        <th>
            Entry Date
        </th>
        <th>
            Repair Finish Date
        </th>
        <th>
            Employee
        </th>
        <th>
            Car Registry Number
        </th>
        <th>
            Description
        </th>
        <th>
            Parts Price
        </th>
        <th>
            Total Cost
        </th>
        <th>
            Created By
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.RepairCards) {
      string selectedRow = ""; 
        if (item.Id == ViewBag.RepairCardId) 
        { 
            selectedRow = "selectedrow"; 
        }    
    <tr class="@selectedRow">
        <td>
            @Html.DisplayFor(modelItem => String.Format("{0:d}", item.EntryDate))
        </td>
        <td>
            @Html.DisplayFor(modelItem => String.Format("{0:d}", item.RepairFinishDate)) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Employee.FirstName) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Car.RegistryNumber) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Description) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.PartsPrice) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TotalPrice) 
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.UserProfile.UserName) 
        </td>
        <td>
            @Html.ActionLink("Select", "Index", new { id=item.Id }) | 
            @Html.ActionLink("Edit", "Edit", new { id=item.Id })  |
            @Html.ActionLink("Details", "Details", new { id=item.Id })  |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })  |
            @Html.ActionLink("RepairFinish", "RepairFinish", new { id=item.Id }) 
        </td>
    </tr>
 } 

</table>

@if (Model.SpareParts != null) { 
<h3>Courses Taught by Selected Instructor</h3> 
<table> 
    <tr> 
        <th></th> 
        <th>Part</th> 
        <th>Price</th>  
    </tr> 
 
    @foreach (var item in Model.SpareParts) 
    { 
        string selectedRow = ""; 
        if (item.Id == ViewBag.PartId) 
        { 
            selectedRow = "selectedrow"; 
        } 
    <tr class="@selectedRow"> 
        <td> 
            @Html.ActionLink("Select", "Index", new { PartId = item.Id })  
        </td> 
        <td> 
            @item.PartName  
        </td> 
        <td> 
            @item.Price 
        </td> 
    </tr> 
    }   
 
</table> 
} 

